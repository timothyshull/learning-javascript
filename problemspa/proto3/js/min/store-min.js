!function(a){"use strict";function o(a,o){if(o=o||function(){},this._dbName=a,!localStorage[a]){var t={mainProb:"",todos:[]};localStorage[a]=JSON.stringify(t)}o.call(this,JSON.parse(localStorage[a]))}o.prototype.findMain=function(a){a=a||function(){},a.call(this,JSON.parse(localStorage[this._dbName]).mainProb)},o.prototype.find=function(a,o){if(o){var t=JSON.parse(localStorage[this._dbName]).todos;o.call(this,t.filter(function(o){for(var t in a)if(a[t]!==o[t])return!1;return!0}))}},o.prototype.findAll=function(a){a=a||function(){},a.call(this,JSON.parse(localStorage[this._dbName]).todos)},o.prototype.saveMain=function(a,o){var t=JSON.parse(localStorage[this._dbName]),i=t.mainProb;o=o||function(){},""!==a&&(i=a,localStorage[this._dbName]=JSON.stringify(t),o.call(this,JSON.parse(localStorage[this._dbName]).mainProb))},o.prototype.save=function(a,o,t){var i=JSON.parse(localStorage[this._dbName]),e=i.todos;if(o=o||function(){},t){for(var r=0;r<e.length;r++)if(e[r].id===t){for(var l in a)e[r][l]=a[l];break}localStorage[this._dbName]=JSON.stringify(i),o.call(this,JSON.parse(localStorage[this._dbName]).todos)}else a.id=(new Date).getTime(),e.push(a),localStorage[this._dbName]=JSON.stringify(i),o.call(this,[a])},o.prototype.removeMain=function(a){var o=JSON.parse(localStorage[this._dbName]),t=o.mainProb;t="",localStorage[this._dbName]=JSON.stringify(o),a.call(this,JSON.parse(localStorage[this._dbName]).mainProb)},o.prototype.remove=function(a,o){for(var t=JSON.parse(localStorage[this._dbName]),i=t.todos,e=0;e<i.length;e++)if(i[e].id==a){i.splice(e,1);break}localStorage[this._dbName]=JSON.stringify(t),o.call(this,JSON.parse(localStorage[this._dbName]).todos)},o.prototype.drop=function(a){localStorage[this._dbName]=JSON.stringify({mainProb:"",todos:[]}),a.call(this,JSON.parse(localStorage[this._dbName]).mainProb,JSON.parse(localStorage[this._dbName]).todos)},a.app=a.app||{},a.app.Store=o}(window);