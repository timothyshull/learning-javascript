!function(t){"use strict";function o(t,o){if(o=o||function(){},this._dbName=t,!localStorage[t]){var a={todos:[]};localStorage[t]=JSON.stringify(a)}o.call(this,JSON.parse(localStorage[t]))}o.prototype.find=function(t,o){if(o){var a=JSON.parse(localStorage[this._dbName]).todos;o.call(this,a.filter(function(o){for(var a in t)if(t[a]!==o[a])return!1;return!0}))}},o.prototype.findAll=function(t){t=t||function(){},t.call(this,JSON.parse(localStorage[this._dbName]).todos)},o.prototype.save=function(t,o,a){var e=JSON.parse(localStorage[this._dbName]),i=e.todos;if(o=o||function(){},a){for(var r=0;r<i.length;r++)if(i[r].id===a){for(var l in t)i[r][l]=t[l];break}localStorage[this._dbName]=JSON.stringify(e),o.call(this,JSON.parse(localStorage[this._dbName]).todos)}else t.id=(new Date).getTime(),i.push(t),localStorage[this._dbName]=JSON.stringify(e),o.call(this,[t])},o.prototype.remove=function(t,o){for(var a=JSON.parse(localStorage[this._dbName]),e=a.todos,i=0;i<e.length;i++)if(e[i].id==t){e.splice(i,1);break}localStorage[this._dbName]=JSON.stringify(a),o.call(this,JSON.parse(localStorage[this._dbName]).todos)},o.prototype.drop=function(t){localStorage[this._dbName]=JSON.stringify({todos:[]}),t.call(this,JSON.parse(localStorage[this._dbName]).todos)},t.app=t.app||{},t.app.Store=o}(window);