!function(t){"use strict";function a(t,a){if(a=a||function(){},this._dbName=t,!localStorage[t]){var o={mainTitle:"",todos:[]};localStorage[t]=JSON.stringify(o)}a.call(this,JSON.parse(localStorage[t]))}a.prototype.find=function(t,a){if(a){var o=JSON.parse(localStorage[this._dbName]).todos;a.call(this,o.filter(function(a){for(var o in t)if(t[o]!==a[o])return!1;return!0}))}},a.prototype.findMain=function(t){t=t||function(){},t.call(this,JSON.parse(localStorage[this._dbName]).mainTitle)},a.prototype.findAll=function(t){t=t||function(){},t.call(this,JSON.parse(localStorage[this._dbName]).todos)},a.prototype.save=function(t,a,o){var i=JSON.parse(localStorage[this._dbName]),e=i.todos;if(a=a||function(){},o){for(var l=0;l<e.length;l++)if(e[l].id===o){for(var r in t)e[l][r]=t[r];break}localStorage[this._dbName]=JSON.stringify(i),a.call(this,JSON.parse(localStorage[this._dbName]).todos)}else t.id=(new Date).getTime(),e.push(t),localStorage[this._dbName]=JSON.stringify(i),a.call(this,[t])},a.prototype.saveMain=function(t,a){var o=JSON.parse(localStorage[this._dbName]);a=a||function(){},o.mainTitle=t,localStorage[this._dbName]=JSON.stringify(o),a.call(this,JSON.parse(localStorage[this._dbName]).mainTitle)},a.prototype.remove=function(t,a){for(var o=JSON.parse(localStorage[this._dbName]),i=o.todos,e=0;e<i.length;e++)if(i[e].id==t){i.splice(e,1);break}localStorage[this._dbName]=JSON.stringify(o),a.call(this,JSON.parse(localStorage[this._dbName]).todos)},a.prototype.removeMain=function(t){var a=JSON.parse(localStorage[this._dbName]);t=t||function(){},a.mainTitle="",localStorage[this._dbName]=JSON.stringify(a),t.call(this,JSON.parse(localStorage[this._dbName]).mainTitle)},a.prototype.drop=function(t){localStorage[this._dbName]=JSON.stringify({mainTitle:"",todos:[]}),t.call(this,JSON.parse(localStorage[this._dbName]))},t.app=t.app||{},t.app.Store=a}(window);