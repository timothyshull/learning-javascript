!function(t){"use strict";function o(t){this.storage=t}o.prototype.create=function(t,o){t=t||"",o=o||function(){};var e={title:t.trim(),completed:!1};this.storage.save(e,o)},o.prototype.createMain=function(t,o){t=t||"",o=o||function(){},this.storage.saveMain(t,o)},o.prototype.read=function(t,o){var e=typeof t;return o=o||function(){},"function"===e?(o=t,this.storage.findAll(o)):void("string"===e||"number"===e?(t=parseInt(t,10),this.storage.find({id:t},o)):this.storage.find(t,o))},o.prototype.readMain=function(t){t=t||function(){},this.storage.findMain(t)},o.prototype.update=function(t,o,e){this.storage.save(o,e,t)},o.prototype.updateMain=function(t,o){o=o||function(){},this.storage.saveMain(t,o)},o.prototype.remove=function(t,o){this.storage.remove(t,o)},o.prototype.removeMain=function(t){this.storage.removeMain(t)},o.prototype.removeAll=function(t){this.storage.drop(t)},o.prototype.getCount=function(t){var o={active:0,completed:0,total:0};this.storage.findAll(function(e){e.forEach(function(t){t.completed?o.completed++:o.active++,o.total++}),t(o)})},t.app=t.app||{},t.app.Model=o}(window);